name: Verificar sintaxis HTML, CSS y JS

on:
  push:
    branches:
      - main
      - Development
      - 'feature/**'
  pull_request:
    branches:
      - main
      - Development
      - 'feature/**'

jobs:
  syntax-check:
    runs-on: ubuntu-latest
    steps:
      - name: "üì• Clonar repositorio"
        uses: actions/checkout@v3

      - name: "üîç Verificar sintaxis HTML"
        run: |
          sudo apt-get update && sudo apt-get install -y tidy
          echo "üìÑ Revisando archivos HTML..."
          html_files=$(find . -name "*.html")
          if [ -z "$html_files" ]; then
            echo "‚úÖ No se encontraron archivos HTML, omitiendo revisi√≥n."
          else
            for file in $html_files; do
              if ! tidy -qe "$file"; then
                echo "‚ùå Error de sintaxis en HTML: $file"
                exit 1
              fi
            done
          fi

      - name: "üé® Verificar sintaxis CSS"
        run: |
          echo '{ "extends": "stylelint-config-standard" }' > .stylelintrc.json
          npm install -g stylelint stylelint-config-standard
          echo "üé® Revisando archivos CSS..."
          css_files=$(find . -name "*.css")
          if [ -z "$css_files" ]; then
            echo "‚úÖ No se encontraron archivos CSS, omitiendo revisi√≥n."
          else
            for file in $css_files; do
              if ! stylelint "$file"; then
                echo "‚ùå Error de sintaxis en CSS: $file"
                exit 1
              fi
            done
          fi

      - name: "‚ö° Verificar sintaxis JavaScript"
        run: |
          echo "‚ö° Revisando archivos JavaScript..."
          js_files=$(find . -name "*.js")
          if [ -z "$js_files" ]; then
            echo "‚úÖ No se encontraron archivos JavaScript, omitiendo revisi√≥n."
          else
            for file in $js_files; do
              if ! node --check "$file"; then
                echo "‚ùå Error de sintaxis en JS: $file"
                exit 1
              fi
            done
          fi