name: Verificar sintaxis HTML, CSS y JS

on:
  push:
    branches:
      - main
      - Development
      - 'feature/**'
  pull_request:
    branches:
      - main
      - Development
      - 'feature/**'

jobs:
  syntax-check:
    runs-on: ubuntu-latest
    steps:
      - name: "📥 Clonar repositorio"
        uses: actions/checkout@v3

      - name: "🔍 Verificar sintaxis HTML"
        run: |
          sudo apt-get update && sudo apt-get install -y tidy
          echo "📄 Revisando archivos HTML..."
          for file in $(find . -name "*.html"); do
            if ! tidy -qe "$file"; then
              echo "❌ Error de sintaxis en HTML: $file"
              exit 1
            fi
          done

      - name: "🎨 Verificar sintaxis CSS"
        run: |
          echo "🎨 Revisando archivos CSS..."
          npm install -g stylelint stylelint-config-standard
          for file in $(find . -name "*.css"); do
            if ! stylelint "$file" --config '{"extends": "stylelint-config-standard"}'; then
              echo "❌ Error de sintaxis en CSS: $file"
              exit 1
            fi
          done

      - name: "⚡ Verificar sintaxis JavaScript"
        run: |
          echo "⚡ Revisando archivos JavaScript..."
          npm install -g eslint
          for file in $(find . -name "*.js"); do
            if ! eslint "$file"; then
              echo "❌ Error de sintaxis en JS: $file"
              exit 1
            fi
          done
